// ==UserScript==
// @name         CSDN å»å¹¿å‘Šæ²‰æµ¸é˜…è¯»æ¨¡å¼
// @namespace    http://tampermonkey.net/
// @version      2.6.0
// @description  æ²‰æµ¸å¼é˜…è¯» ğŸŒˆ ä½¿ç”¨éšæœºèƒŒæ™¯å›¾ç‰‡ ğŸ¬ é‡æ„é¡µé¢å¸ƒå±€ ğŸ¯ å‡€åŒ–å‰ªåˆ‡æ¿ ğŸ¨ å±è”½ä¸€åˆ‡å½±å“é˜…è¯»çš„å…ƒç´  ğŸ§
// @description  èƒŒæ™¯å›¾ç‰‡å–è‡ª https://www.baidu.com/home/skin/data/skin
// @icon         https://avatar.csdn.net/D/7/F/3_nevergk.jpg
// @author       sven
// @note         v1.8    ç§»é™¤ç‚¹å‡»æ–‡ç« ä¸­çš„é“¾æ¥æ‹¦æˆª, ç›´æ¥è·³è½¬åˆ°ç›®æ ‡é“¾æ¥, å»ºè®®ä½¿ç”¨é¼ æ ‡ä¸­é”®åœ¨æ–°çª—å£æ‰“å¼€é“¾æ¥!; æ›´æ–°å³ä¾§ toolkit æŒ‰é’®ç»„çš„å±è”½è§„åˆ™
// @note         v1.9    è§£é™¤è·³è½¬æ‹¦æˆª; å¢åŠ æ–°çš„å¹¿å‘Šè¿‡æ»¤è§„åˆ™
// @note         v1.10   å¢åŠ  ask.csdn.net æ”¯æŒ
// @note         v1.11   æ›´æ–° bbs.csdn.net è¿‡æ»¤è§„åˆ™; å¢åŠ åº•éƒ¨ "åº•çº¿" æè¿°
// @note         v2.0    å¢åŠ èƒŒæ™¯å›¾è®¾ç½®å…¥å£æŒ‰é’®, æ‰©å±• bottom tool bar
// @note         v2.1    ä¿®æ”¹è„šæœ¬åŠ è½½æ—¶æœº, ä¸ä¼šå†å‡ºç°å…ˆåŠ è½½å¹¿å‘Šåå±è”½çš„æƒ…å†µäº†
// @note         v2.2.0  å¢åŠ è®¾ç½®å…¥å£ icon timeout
// @note         v2.2.1  å±è”½ side toolbar ä¸­çš„å¹¿å‘Š icon
// @note         v2.3.0  æ˜¾ç¤ºå½“å‰èƒŒæ™¯å›¾åç§°, å®Œå–„è‡ªå®šä¹‰å›¾ç‰‡; åˆ é™¤ `æœ€è¿‘ä½¿ç”¨` å›¾ç‰‡ç±»ç›®
// @note         v2.4.0  å¢åŠ éšè—è®¾ç½®æŒ‰é’®é€‰é¡¹; ä¿®å¤è‡ªå®šä¹‰é“¾æ¥å–å€¼é”™è¯¯çš„é—®é¢˜
// @note         v2.4.1  ä¿®å¤è®¾ç½®å¼¹çª—åœ¨ç‰¹å®šé¡µé¢ä¸‹çš„å®½åº¦å¼‚å¸¸é—®é¢˜, å¢åŠ åº•éƒ¨æ¨èæ–‡ç«  hover æ•ˆæœ
// @note         v2.5.0  å¢åŠ  iteye.com æ ·å¼å…¼å®¹, ä½¿ç”¨ GM_setValue å®ç°è·¨åŸŸå…±äº«æœ¬åœ°å­˜å‚¨æ•°æ®
// @note         v2.5.1  ä¿®æ”¹æ­£æ–‡åº•éƒ¨ ç§ä¿¡æ±‚å¸®åŠ© æŒ‰é’®æ ·å¼, ä½¿å…¶ä»…åœ¨ hover çŠ¶æ€ä¸‹å¯è§, å±è”½åº•éƒ¨ copyright å’Œ åŸçš®è‚¤ä¿¡æ¯
// @note         v2.5.2  å±è”½ **çš„é¡¶éƒ¨å·¨å¹…å¹¿å‘Šå›¾; éšè—åº•éƒ¨ more-toolbox æŒ‰é’®ç»„; ä¿®æ”¹è„šæœ¬æè¿°
// @note         v2.5.3  æ›´æ–°æ–‡ç« å†…å®¹åŒºåŸŸé¡¶éƒ¨çš„å·¨å¹…å¹¿å‘Šå›¾å±è”½è§„åˆ™
// @note         v2.5.4  æ˜¾ç¤ºè¯„è®ºåˆ—è¡¨åˆ†é¡µç»„ä»¶; ç»§ç»­æ›´æ–°å¹¿å‘Šå±è”½è§„åˆ™
// @note         v2.5.5  ç›‘å¬æ•°æ®å±‚å˜åŒ–å¹¶æ§åˆ¶åˆ†é¡µç»„ä»¶æ˜¾ç¤º; ä¼˜åŒ–è¯„è®ºåŒºæ ·å¼
// @note         v2.5.6  è¦†ç›–æ‰€æœ‰ media query æ ·å¼ä»¥é˜²æ­¢åŸæœ‰çš„è‡ªé€‚åº”æ ·å¼å¯¼è‡´å¸ƒå±€é”™ä¹±; è¯„è®ºåŒºè¯„è®ºå†…å®¹å¼ºåˆ¶æ¢è¡Œä»¥ä¿æŒä¸€è‡´æ€§
// @note         v2.5.7  é˜²æ­¢æ–‡ç« å†…å®¹è¢«é»‘ç™½åŒ–å¤„ç†(æ–‡ä¸­çš„å›¾ç‰‡è¢«ç°åº¦å¤„ç†åä¸¥é‡å½±å“é˜…è¯»), é€‚ç”¨äºç‰¹æ®Šæ—¥æœŸ; *2020-04-04 å‘ç–«æƒ…ä¸­ä»˜å‡ºåŠªåŠ›çš„æ‰€æœ‰åŒ»åŠ¡å·¥ä½œè€…åŠå¿—æ„¿è€…è‡´æ•¬!*
// @note         v2.5.8  å¢åŠ åŸæ–‡é“¾æ¥(ä»é¡¶éƒ¨æŠ˜å æ æˆ–æ–‡ä¸­æå–åŸæ–‡é“¾æ¥), æ˜¾ç¤ºåœ¨é¡¶éƒ¨ info-box ä¸­; å±è”½å›ºå®šåœ¨é¡µé¢åº•éƒ¨çš„ toolbox; åº•éƒ¨ä½œè€…ä¿¡æ¯å³ä¾§æŒ‰é’®åªæ˜¾ç¤ºå…³æ³¨; è¯„è®ºåŒºè¾“å…¥æ¡†äº¤å‰è½´å¯¹é½
// @note         v2.5.9  å¯ä»¥è®¾ç½®æ˜¯å¦æ˜¾ç¤ºåŸæ–‡é“¾æ¥, ä¿®å¤è®¾ç½®å¼¹çª—æ— æ³•å…³é—­çš„ bug, è°ƒæ•´è¯„è®ºåŒºé€æ˜åº¦å¹¶å¢åŠ  hover æ•ˆæœ
// @note         v2.5.10 ä¿®å¤åœ¨å†…å®¹åŒºæ—¶æ˜¾ç¤ºæ¨ªå‘æ»šåŠ¨æ¡çš„é—®é¢˜, ä¿®å¤åŸæ–‡é“¾æ¥çš„è´ªå©ªåŒ¹é…(href)é—®é¢˜
// @note         v2.6.0  å¢åŠ çº¯è‰²èƒŒæ™¯è®¾ç½®åŠŸèƒ½, å¼•å…¥ a color picker ç»„ä»¶; å¢åŠ åˆ·æ–°èƒŒæ™¯å›¾ç‰‡åŠŸèƒ½; å¢åŠ è®¾ç½®å¼¹çª—å†…æŒ‰é’®æ ·å¼
// @match        *://blog.csdn.net/*/article/details/*
// @match        *://*.blog.csdn.net/article/details/*
// @require      https://unpkg.com/a-color-picker@1.2.1/dist/acolorpicker.js
// @include      https://bbs.csdn.net/topics/*
// @include      https://*.iteye.com/blog/*
// @include      https://*.iteye.com/news/*
// @include      https://ask.csdn.net/questions/*
// @grant        GM_getValue
// @grant        GM.getValue
// @grant        GM_setValue
// @grant        GM.setValue
// @run-at       document-start
// @match        <$URL$>
// ==/UserScript==

(function () {
    'use strict';
    (() => {
        // çˆ¬åˆ°çš„æ‰€æœ‰ç°åœ¨å¯è®¿é—®çš„èƒŒæ™¯å›¾ID
        // const IMG_ID_LIST = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499, 500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514, 515, 516, 517, 518, 519, 520, 521, 522, 523, 524, 525, 526, 527, 528, 529, 530, 531, 532, 533, 534, 535, 536, 537, 538, 539, 540, 541, 542, 543, 544, 608, 609, 610, 611, 620, 621, 622, 623, 624, 625, 626, 627, 628, 629, 630, 631, 632, 633, 634, 635, 636, 637, 638, 639, 640, 641, 642, 643, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 654, 655, 656, 657, 658, 659, 660, 661, 662, 663, 664, 665, 666, 667, 668, 669, 670, 671, 672, 673, 674, 675, 676, 677, 678, 679, 680, 681, 682, 683, 684, 685, 686, 687, 688, 689, 690, 691, 692, 693, 694, 695, 696, 697, 698, 699, 700, 701, 702, 703, 704, 705, 706, 707, 708, 709, 710, 711, 712, 713, 714, 715, 716, 717, 718, 719, 720, 721, 722, 723, 724, 725, 726, 727, 728, 729, 730, 731, 732, 733, 734, 735, 736, 737, 738, 739, 740, 741, 742, 743, 744, 745, 746, 747, 748, 749, 750, 751, 752, 753, 754, 755, 756, 757, 758, 759, 760, 761, 762, 763, 764, 765, 766, 767, 768, 769, 770, 771, 772, 773, 774, 775, 776, 777, 778, 779, 780, 781, 782, 783, 784, 785, 786, 787, 788, 789, 790, 791, 792, 793, 794, 795, 796, 797, 798, 799, 800, 801, 802, 803, 804, 805, 806, 807, 808, 809, 810, 811, 812, 813, 814, 815, 816, 817, 818, 819, 820, 821, 822, 823, 824, 825, 826, 827, 828, 829, 830, 831, 832, 833, 834, 835, 836, 837, 838, 839, 840, 841, 842, 843, 844, 845, 846, 847, 848, 849, 850, 851, 852, 853, 854, 855, 856, 857, 858, 859, 860, 861, 862, 863, 864, 865, 866, 867, 868, 869, 870, 871, 872, 873, 874, 875, 876, 877, 878, 879, 880, 881, 882, 883, 884, 885, 886, 887, ]
        const IMG_CATEGORYS = { "çƒ­é—¨": [887, 886, 883, 882, 881, 880, 879, 878, 877, 876, 874, 875, 872, 873, 859, 832, 833, 834, 827, 828, 829, 830, 831, 817, 818, 819, 820, 821, 805, 806, 807, 808, 809, 810, 811, 812, 813, 814, 815, 816, 796, 797, 798, 799, 800, 801, 802, 803, 804, 776, 777, 778, 781, 784, 765, 767, 768, 766, 611, 610, 608, 720], "å†’é™©å²›2": [860, 861, 862, 863, 864, 865, 866, 867, 868, 869, 870, 871], "å®ˆæœ›å…ˆé”‹": [835, 836, 837, 838, 839, 840, 841, 842, 843, 844, 845, 846], "é­”å…½ä¸–ç•Œ": [721, 722, 723, 724, 725, 726, 727, 728, 729, 730, 731, 732], "ç‚‰çŸ³ä¼ è¯´": [733, 734, 735, 736, 737, 738, 739, 740, 741, 742, 743, 744], "é£æš´è‹±é›„": [660, 661, 662, 663, 664, 665, 666, 667, 668, 669, 670, 671], "æš—é»‘ç ´åç¥â…¢": [672, 673, 674, 675, 676, 677, 678, 679, 680, 681, 682, 683], "æ˜Ÿé™…äº‰éœ¸II": [684, 685, 686, 687, 688, 689, 690, 691, 692, 693, 694, 695], "å†·å…”": [749, 750, 751, 752, 753, 754, 755, 756, 757, 758, 759, 760], "é˜¿ç‹¸": [521, 114, 523, 524, 525, 526, 527, 528, 529, 530, 531, 532], "ç‚®ç‚®å…µ": [540, 534, 535, 536, 537, 538, 539, 533, 541, 542, 543, 544], "æ—å¿ƒå¦‚": [437, 438, 440, 439, 441, 443, 447, 444, 445, 446, 442, 448], "éƒ‘çˆ½": [509, 510, 511, 512, 515, 514, 513, 516, 517, 518, 519, 520], "æˆšè–‡": [449, 456, 451, 452, 453, 454, 455, 450, 457, 459, 458, 460], "ä½Ÿä¸½å¨…": [485, 486, 490, 488, 489, 487, 491, 492, 493, 494, 495, 496], "Angelababy": [400, 401, 402, 403, 407, 405, 406, 410, 404, 409, 408, 411], "å”å«£": [473, 474, 475, 482, 480, 478, 479, 477, 476, 481, 483, 484], "æå†°å†°": [424, 425, 427, 430, 426, 429, 428, 431, 432, 433, 434, 435], "é«˜åœ†åœ†": [412, 413, 418, 415, 416, 417, 414, 419, 420, 421, 422, 423], "å­™ä¿ª": [461, 462, 463, 464, 471, 466, 468, 467, 469, 470, 465, 472], "å§šæ™¨": [497, 498, 499, 506, 502, 501, 503, 504, 505, 507, 500, 508], "æ¨å¹‚": [200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211], "åˆ˜è¯—è¯—": [273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283], "èƒ¡æ­Œ": [260, 261, 262, 263, 628, 629, 630, 631, 268, 269, 270, 271], "é‚“ç´«æ£‹": [320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331], "èµµä¸½é¢–": [249, 2481, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259], "é©¬å¤©å®‡": [284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295], "é™ˆæ™“": [233, 225, 226, 227, 228, 229, 230, 231, 232, 224, 234, 235], "é™ˆä¼Ÿéœ†": [308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319], "æŸ³å²©": [236, 2371, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247], "å´å¥‡éš†": [297, 298, 299, 300, 301, 302, 304, 296, 305, 306, 307], "é£æ™¯": [822, 823, 824, 825, 826, 54, 62, 5, 37, 115, 116, 117, 118, 120, 122, 123, 49, 25, 121, 26, 43, 45, 48, 51, 70, 4, 10, 11, 17, 23, 6, 28, 38, 16, 31, 42, 163, 164, 165, 166, 167, 168, 170, 171, 172, 174, 175, 177, 178, 179, 180, 181, 182, 184, 185, 186, 69, 57, 13, 67], "ç®€çº¦": [12, 111, 114, 53, 27, 33, 41, 35, 2, 14, 44, 21, 36, 8, 150, 125, 1, 169, 173, 176, 183, 46, 61, 47, 52, 64, 24, 58, 18, 59, 55, 9, 20], "å°æ¸…æ–°": [74, 71, 113, 119, 124, 29, 65, 32, 34, 39, 40, 50, 60, 73, 30, 63, 126, 128, 66, 19, 112, 22, 68, 7, 15, 3, 56] }
        const IMG_MAP = { "1": "åŸé‡ å…¨æ™¯å›¾ç‰‡", "2": "é“¶æ±‰è¿¢è¿¢ å…¨æ™¯å›¾ç‰‡", "3": "ç´«è‰²éƒé‡‘é¦™ ç™¾åº¦ç›¸å†Œ", "4": "é£ç€‘å¦‚ç»ƒ å…¨æ™¯å›¾ç‰‡", "5": "æ¢¦é‡Œæ°´ä¹¡ æ¢æ‘„å°å­", "6": "é•¿å¤©ä¸€è‰² å…¨æ™¯å›¾ç‰‡", "7": "æ˜¥æ„æµ“ sprint207", "8": "æš®è‰²å››åˆ æ¢æ‘„å°å­", "9": "å‡ºæ°´èŠ™è“‰ æ¢æ‘„å°å­", "10": "å£ç«‹åƒä» å…¨æ™¯å›¾ç‰‡", "11": "å»Šæ¡¥é—æ¢¦ æ¢æ‘„å°å­", "12": "å¯¥è½æ˜Ÿæ²³ å…¨æ™¯å›¾ç‰‡", "13": "å±‚æ—å°½æŸ“ å…¨æ™¯å›¾ç‰‡", "14": "æ™¨æ›¦ æ¢æ‘„å°å­", "15": "æ—©æ¢…äº‰æ˜¥ æ¢æ‘„å°å­", "16": "åƒå±±é›ª åˆ˜éœ„", "17": "æµ·ä¹‹æ¢¦ å…¨æ™¯å›¾ç‰‡", "18": "ç™½è‰²é£ç¾½ sprint207", "19": "åœ¨è·¯ä¸Š jesse2young", "20": "é”¦é²¤ sprint207", "21": "é›¨å¤œ yunxiaoqian", "22": "æ°´å¢¨æ±Ÿå— æˆˆæ–¯æ‹‰918", "23": "åŸå¸‚ä¹‹å…‰ æˆˆæ–¯æ‹‰918", "24": "ä¸‰å¶è‰ wanzathe", "25": " å…¨æ™¯å›¾ç‰‡", "26": " å…¨æ™¯å›¾ç‰‡", "27": " å…¨æ™¯å›¾ç‰‡", "28": " å…¨æ™¯å›¾ç‰‡", "29": " å…¨æ™¯å›¾ç‰‡", "30": " å…¨æ™¯å›¾ç‰‡", "31": " å…¨æ™¯å›¾ç‰‡", "32": " å…¨æ™¯å›¾ç‰‡", "33": " å…¨æ™¯å›¾ç‰‡", "34": " å…¨æ™¯å›¾ç‰‡", "35": " å…¨æ™¯å›¾ç‰‡", "36": " å…¨æ™¯å›¾ç‰‡", "37": " å…¨æ™¯å›¾ç‰‡", "38": " å…¨æ™¯å›¾ç‰‡", "39": " å…¨æ™¯å›¾ç‰‡", "40": " å…¨æ™¯å›¾ç‰‡", "41": " å…¨æ™¯å›¾ç‰‡", "42": " å…¨æ™¯å›¾ç‰‡", "43": " å…¨æ™¯å›¾ç‰‡", "44": " å…¨æ™¯å›¾ç‰‡", "45": " å…¨æ™¯å›¾ç‰‡", "46": " å…¨æ™¯å›¾ç‰‡", "47": " å…¨æ™¯å›¾ç‰‡", "48": " å…¨æ™¯å›¾ç‰‡", "49": " å…¨æ™¯å›¾ç‰‡", "50": " å…¨æ™¯å›¾ç‰‡", "51": " å…¨æ™¯å›¾ç‰‡", "52": " å…¨æ™¯å›¾ç‰‡", "53": " ranklau", "54": " silsnow", "55": " weifengqingyu", "56": " å¼ äº‘æ´01", "57": " tiffanywangbei", "58": " ying_ok_delang", "59": " sherry_dundun", "60": " æºå½¢æ¯•éœ²", "61": " è·¯ç’", "62": " richard-wang", "63": " æºå½¢æ¯•éœ²", "64": " åœ£åè‹¥ç‘Ÿ", "65": " ç±³å£¹æ˜ ç”»", "66": " ç±³å£¹æ˜ ç”»", "67": " è·¯ç’", "68": " è·¯ç’", "69": " æ¯›å˜‰æ–‡", "70": " richard-wang", "71": " fish,èƒ¡å­é±¼", "73": " fish,èƒ¡å­é±¼", "74": " fish,èƒ¡å­é±¼", "111": " å…¨æ™¯å›¾ç‰‡", "112": " fishï¼Œèƒ¡å­é±¼", "113": " fishï¼Œèƒ¡å­é±¼", "114": " å…¨æ™¯å›¾ç‰‡", "115": " å½¼å²¸Claire", "116": " è½ç»ªçº·é£", "117": " é­”ç¥å’’", "118": " lemonchen07", "119": " å†³æ˜", "120": " é•¿è€äº®", "121": " è“æœˆç©è½¬è¥¿éƒ¨", "122": " å°pie", "123": " woodfishbbi", "124": " æ—©å·", "125": "æ³¢æ¶›æ±¹æ¶Œ å…¨æ™¯", "126": "ç«è½¦é£é©° å…¨æ™¯", "128": "æ¼”å”±ä¼š å…¨æ™¯", "150": "æ¿€æƒ…ä¸–ç•Œæ¯ ", "163": " shenmishashou", "164": " æˆ‘å«å­Ÿå¤•", "165": " ç©·æ¸¸æ™“æ˜", "166": " 1024å°è™ç‰™", "167": " shenmishashou", "168": " shenmishashou", "169": " 0535xiaoyudi", "170": " ç©·æ¸¸æ™“æ˜", "171": " è¥¿è¥¿é‡Œç©ä¸åœ", "172": " è¥¿è¥¿é‡Œç©ä¸åœ", "173": " 1024å°è™ç‰™", "174": " shenmishashou", "175": " ç©·æ¸¸æ™“æ˜", "176": " 1024å°è™ç‰™", "177": " æˆ‘å«å­Ÿå¤•", "178": " 1024å°è™ç‰™", "179": " shenmishashou", "180": " è¥¿è¥¿é‡Œç©ä¸åœ", "181": " æˆ‘å«å­Ÿå¤•", "182": " è“è‰²å‘“è¯­", "183": " è¥¿è¥¿é‡Œç©ä¸åœ", "184": " è¥¿è¥¿é‡Œç©ä¸åœ", "185": " æˆ‘å«å­Ÿå¤•", "186": " è¥¿è¥¿é‡Œç©ä¸åœ", "200": "æ¨å¹‚0", "201": "æ¨å¹‚1", "202": "æ¨å¹‚2", "203": "æ¨å¹‚3", "204": "æ¨å¹‚4", "205": "æ¨å¹‚5", "206": "æ¨å¹‚6", "207": "æ¨å¹‚7", "208": "æ¨å¹‚8", "209": "æ¨å¹‚9", "210": "æ¨å¹‚10", "211": "æ¨å¹‚11", "224": "é™ˆæ™“9", "225": "é™ˆæ™“1", "226": "é™ˆæ™“2", "227": "é™ˆæ™“3", "228": "é™ˆæ™“4", "229": "é™ˆæ™“5", "230": "é™ˆæ™“6", "231": "é™ˆæ™“7", "232": "é™ˆæ™“8", "233": "é™ˆæ™“0", "234": "é™ˆæ™“10", "235": "é™ˆæ™“11", "236": "æŸ³å²©0", "238": "æŸ³å²©2", "239": "æŸ³å²©3", "240": "æŸ³å²©4", "241": "æŸ³å²©5", "242": "æŸ³å²©6", "243": "æŸ³å²©7", "244": "æŸ³å²©8", "245": "æŸ³å²©9", "246": "æŸ³å²©10", "247": "æŸ³å²©11", "249": "èµµä¸½é¢–0", "250": "èµµä¸½é¢–2", "251": "èµµä¸½é¢–3", "252": "èµµä¸½é¢–4", "253": "èµµä¸½é¢–5", "254": "èµµä¸½é¢–6", "255": "èµµä¸½é¢–7", "256": "èµµä¸½é¢–8", "257": "èµµä¸½é¢–9", "258": "èµµä¸½é¢–10", "259": "èµµä¸½é¢–11", "260": "èƒ¡æ­Œ0", "261": "èƒ¡æ­Œ1", "262": "èƒ¡æ­Œ2", "263": "èƒ¡æ­Œ3", "268": "èƒ¡æ­Œ8", "269": "èƒ¡æ­Œ9", "270": "èƒ¡æ­Œ10", "271": "èƒ¡æ­Œ11", "273": "åˆ˜è¯—è¯—0", "274": "åˆ˜è¯—è¯—1", "275": "åˆ˜è¯—è¯—2", "276": "åˆ˜è¯—è¯—3", "277": "åˆ˜è¯—è¯—4", "278": "åˆ˜è¯—è¯—5", "279": "åˆ˜è¯—è¯—6", "280": "åˆ˜è¯—è¯—7", "281": "åˆ˜è¯—è¯—8", "282": "åˆ˜è¯—è¯—9", "283": "åˆ˜è¯—è¯—10", "284": "é©¬å¤©å®‡0", "285": "é©¬å¤©å®‡1", "286": "é©¬å¤©å®‡2", "287": "é©¬å¤©å®‡3", "288": "é©¬å¤©å®‡4", "289": "é©¬å¤©å®‡5", "290": "é©¬å¤©å®‡6", "291": "é©¬å¤©å®‡7", "292": "é©¬å¤©å®‡8", "293": "é©¬å¤©å®‡9", "294": "é©¬å¤©å®‡10", "295": "é©¬å¤©å®‡11", "296": "å´å¥‡éš†7", "297": "å´å¥‡éš†0", "298": "å´å¥‡éš†1", "299": "å´å¥‡éš†2", "300": "å´å¥‡éš†3", "301": "å´å¥‡éš†4", "302": "å´å¥‡éš†5", "304": "å´å¥‡éš†6", "305": "å´å¥‡éš†8", "306": "å´å¥‡éš†9", "307": "å´å¥‡éš†10", "308": "é™ˆä¼Ÿéœ†0", "309": "é™ˆä¼Ÿéœ†1", "310": "é™ˆä¼Ÿéœ†2", "311": "é™ˆä¼Ÿéœ†3", "312": "é™ˆä¼Ÿéœ†4", "313": "é™ˆä¼Ÿéœ†5", "314": "é™ˆä¼Ÿéœ†6", "315": "é™ˆä¼Ÿéœ†7", "316": "é™ˆä¼Ÿéœ†8", "317": "é™ˆä¼Ÿéœ†9", "318": "é™ˆä¼Ÿéœ†10", "319": "é™ˆä¼Ÿéœ†11", "320": "é‚“ç´«æ£‹0", "321": "é‚“ç´«æ£‹1", "322": "é‚“ç´«æ£‹2", "323": "é‚“ç´«æ£‹3", "324": "é‚“ç´«æ£‹4", "325": "é‚“ç´«æ£‹5", "326": "é‚“ç´«æ£‹6", "327": "é‚“ç´«æ£‹7", "328": "é‚“ç´«æ£‹8", "329": "é‚“ç´«æ£‹9", "330": "é‚“ç´«æ£‹10", "331": "é‚“ç´«æ£‹11", "400": "Angelababy0", "401": "Angelababy1", "402": "Angelababy2", "403": "Angelababy3", "404": "Angelababy8", "405": "Angelababy5", "406": "Angelababy6", "407": "Angelababy4", "408": "Angelababy10", "409": "Angelababy9", "410": "Angelababy7", "411": "Angelababy11", "412": "é«˜åœ†åœ†0", "413": "é«˜åœ†åœ†1", "414": "é«˜åœ†åœ†6", "415": "é«˜åœ†åœ†3", "416": "é«˜åœ†åœ†4", "417": "é«˜åœ†åœ†5", "418": "é«˜åœ†åœ†2", "419": "é«˜åœ†åœ†7", "420": "é«˜åœ†åœ†8", "421": "é«˜åœ†åœ†9", "422": "é«˜åœ†åœ†10", "423": "é«˜åœ†åœ†11", "424": "æå†°å†°0", "425": "æå†°å†°1", "426": "æå†°å†°4", "427": "æå†°å†°2", "428": "æå†°å†°6", "429": "æå†°å†°5", "430": "æå†°å†°3", "431": "æå†°å†°7", "432": "æå†°å†°8", "433": "æå†°å†°9", "434": "æå†°å†°10", "435": "æå†°å†°11", "437": "æ—å¿ƒå¦‚0", "438": "æ—å¿ƒå¦‚1", "439": "æ—å¿ƒå¦‚3", "440": "æ—å¿ƒå¦‚2", "441": "æ—å¿ƒå¦‚4", "442": "æ—å¿ƒå¦‚10", "443": "æ—å¿ƒå¦‚5", "444": "æ—å¿ƒå¦‚7", "445": "æ—å¿ƒå¦‚8", "446": "æ—å¿ƒå¦‚9", "447": "æ—å¿ƒå¦‚6", "448": "æ—å¿ƒå¦‚11", "449": "æˆšè–‡0", "450": "æˆšè–‡7", "451": "æˆšè–‡2", "452": "æˆšè–‡3", "453": "æˆšè–‡4", "454": "æˆšè–‡5", "455": "æˆšè–‡6", "456": "æˆšè–‡1", "457": "æˆšè–‡8", "458": "æˆšè–‡10", "459": "æˆšè–‡9", "460": "æˆšè–‡11", "461": " é™ˆæ¼«", "462": "å­™ä¿ª1", "463": "å­™ä¿ª2", "464": "å­™ä¿ª3", "465": "å­™ä¿ª10", "466": "å­™ä¿ª5", "467": "å­™ä¿ª7", "468": " é™ˆæ¼«", "469": " é™ˆæ¼«", "470": "å­™ä¿ª9", "471": "å­™ä¿ª4", "472": "å­™ä¿ª11", "473": "å”å«£0", "474": "å”å«£1", "475": "å”å«£2", "476": "å”å«£8", "477": "å”å«£7", "478": "å”å«£5", "479": "å”å«£6", "480": "å”å«£4", "481": "å”å«£9", "482": "å”å«£3", "483": "å”å«£10", "484": "å”å«£11", "485": "ä½Ÿä¸½å¨…0", "486": "ä½Ÿä¸½å¨…1", "487": "ä½Ÿä¸½å¨…5", "488": "ä½Ÿä¸½å¨…3", "489": "ä½Ÿä¸½å¨…4", "490": "ä½Ÿä¸½å¨…2", "491": "ä½Ÿä¸½å¨…6", "492": "ä½Ÿä¸½å¨…7", "493": "ä½Ÿä¸½å¨…8", "494": "ä½Ÿä¸½å¨…9", "495": "ä½Ÿä¸½å¨…10", "496": "ä½Ÿä¸½å¨…11", "497": "å§šæ™¨0", "498": "å§šæ™¨1", "499": "å§šæ™¨2", "500": "å§šæ™¨10", "501": "å§šæ™¨5", "502": "å§šæ™¨4", "503": "å§šæ™¨6", "504": "å§šæ™¨7", "505": "å§šæ™¨8", "506": "å§šæ™¨3", "507": "å§šæ™¨9", "508": "å§šæ™¨11", "509": "éƒ‘çˆ½0", "510": "éƒ‘çˆ½1", "511": "éƒ‘çˆ½2", "512": "éƒ‘çˆ½3", "513": "éƒ‘çˆ½6", "514": "éƒ‘çˆ½5", "515": "éƒ‘çˆ½4", "516": "éƒ‘çˆ½7", "517": "éƒ‘çˆ½8", "518": "éƒ‘çˆ½9", "519": "éƒ‘çˆ½10", "520": "éƒ‘çˆ½11", "521": "é˜¿ç‹¸0", "523": "é˜¿ç‹¸2", "524": "é˜¿ç‹¸3", "525": "é˜¿ç‹¸4", "526": "é˜¿ç‹¸5", "527": "é˜¿ç‹¸6", "528": "é˜¿ç‹¸7", "529": "é˜¿ç‹¸8", "530": "é˜¿ç‹¸9", "531": "é˜¿ç‹¸10", "532": "é˜¿ç‹¸11", "533": "ç‚®ç‚®å…µ7", "534": "ç‚®ç‚®å…µ1", "535": "ç‚®ç‚®å…µ2", "536": "ç‚®ç‚®å…µ3", "537": "ç‚®ç‚®å…µ4", "538": "ç‚®ç‚®å…µ5", "539": "ç‚®ç‚®å…µ6", "540": "ç‚®ç‚®å…µ0", "541": "ç‚®ç‚®å…µ8", "542": "ç‚®ç‚®å…µ9", "543": "ç‚®ç‚®å…µ10", "544": "ç‚®ç‚®å…µ11", "608": "çƒ­é—¨60", "610": "çƒ­é—¨59", "611": "çƒ­é—¨58", "628": "èƒ¡æ­Œ4", "629": "èƒ¡æ­Œ5", "630": "èƒ¡æ­Œ6", "631": "èƒ¡æ­Œ7", "660": "é£æš´è‹±é›„0", "661": "é£æš´è‹±é›„1", "662": "é£æš´è‹±é›„2", "663": "é£æš´è‹±é›„3", "664": "é£æš´è‹±é›„4", "665": "é£æš´è‹±é›„5", "666": "é£æš´è‹±é›„6", "667": "é£æš´è‹±é›„7", "668": "é£æš´è‹±é›„8", "669": "é£æš´è‹±é›„9", "670": "é£æš´è‹±é›„10", "671": "é£æš´è‹±é›„11", "672": "æš—é»‘ç ´åç¥â…¢0", "673": "æš—é»‘ç ´åç¥â…¢1", "674": "æš—é»‘ç ´åç¥â…¢2", "675": "æš—é»‘ç ´åç¥â…¢3", "676": "æš—é»‘ç ´åç¥â…¢4", "677": "æš—é»‘ç ´åç¥â…¢5", "678": "æš—é»‘ç ´åç¥â…¢6", "679": "æš—é»‘ç ´åç¥â…¢7", "680": "æš—é»‘ç ´åç¥â…¢8", "681": "æš—é»‘ç ´åç¥â…¢9", "682": "æš—é»‘ç ´åç¥â…¢10", "683": "æš—é»‘ç ´åç¥â…¢11", "684": "æ˜Ÿé™…äº‰éœ¸II0", "685": "æ˜Ÿé™…äº‰éœ¸II1", "686": "æ˜Ÿé™…äº‰éœ¸II2", "687": "æ˜Ÿé™…äº‰éœ¸II3", "688": "æ˜Ÿé™…äº‰éœ¸II4", "689": "æ˜Ÿé™…äº‰éœ¸II5", "690": "æ˜Ÿé™…äº‰éœ¸II6", "691": "æ˜Ÿé™…äº‰éœ¸II7", "692": "æ˜Ÿé™…äº‰éœ¸II8", "693": "æ˜Ÿé™…äº‰éœ¸II9", "694": "æ˜Ÿé™…äº‰éœ¸II10", "695": "æ˜Ÿé™…äº‰éœ¸II11", "720": "çƒ­é—¨61", "721": "é­”å…½ä¸–ç•Œ0", "722": "é­”å…½ä¸–ç•Œ1", "723": "é­”å…½ä¸–ç•Œ2", "724": "é­”å…½ä¸–ç•Œ3", "725": "é­”å…½ä¸–ç•Œ4", "726": "é­”å…½ä¸–ç•Œ5", "727": "é­”å…½ä¸–ç•Œ6", "728": "é­”å…½ä¸–ç•Œ7", "729": "é­”å…½ä¸–ç•Œ8", "730": "é­”å…½ä¸–ç•Œ9", "731": "é­”å…½ä¸–ç•Œ10", "732": "é­”å…½ä¸–ç•Œ11", "733": "ç‚‰çŸ³ä¼ è¯´0", "734": "ç‚‰çŸ³ä¼ è¯´1", "735": "ç‚‰çŸ³ä¼ è¯´2", "736": "ç‚‰çŸ³ä¼ è¯´3", "737": "ç‚‰çŸ³ä¼ è¯´4", "738": "ç‚‰çŸ³ä¼ è¯´5", "739": "ç‚‰çŸ³ä¼ è¯´6", "740": "ç‚‰çŸ³ä¼ è¯´7", "741": "ç‚‰çŸ³ä¼ è¯´8", "742": "ç‚‰çŸ³ä¼ è¯´9", "743": "ç‚‰çŸ³ä¼ è¯´10", "744": "ç‚‰çŸ³ä¼ è¯´11", "749": "å†·å…”0", "750": "å†·å…”1", "751": "å†·å…”2", "752": "å†·å…”3", "753": "å†·å…”4", "754": "å†·å…”5", "755": "å†·å…”6", "756": "å†·å…”7", "757": "å†·å…”8", "758": "å†·å…”9", "759": "å†·å…”10", "760": "å†·å…”11", "765": "çƒ­é—¨54", "766": "çƒ­é—¨57", "767": "çƒ­é—¨55", "768": "çƒ­é—¨56", "776": " å…‰çº¿å½±ä¸š", "777": " å…‰çº¿å½±ä¸š", "778": " å…‰çº¿å½±ä¸š", "781": " å…‰çº¿å½±ä¸š", "784": " æ«æµ·å½±ä¸š", "796": " æ¬¢ç‘ä¸–çºª", "797": " æ¬¢ç‘ä¸–çºª", "798": " æ¬¢ç‘ä¸–çºª", "799": " æ¬¢ç‘ä¸–çºª", "800": " æ¬¢ç‘ä¸–çºª", "801": " æ¬¢ç‘ä¸–çºª", "802": " æ’ä¸šå½±ä¸š", "803": " å‘¨è¿…å·¥ä½œå®¤", "804": " åæ˜ ä¼ åª’", "805": " çˆ±å¥‡è‰º", "806": " çˆ±å¥‡è‰º", "807": " çˆ±å¥‡è‰º", "808": " ä¸–çºªé•¿é¾™", "809": " ä¸–çºªé•¿é¾™", "810": " ä¸–çºªé•¿é¾™", "811": " å˜‰æ˜ å½±ä¸š", "812": " æ—å¿ƒå¦‚å·¥ä½œå®¤", "813": " ç¯çƒå½±ä¸š", "814": " ç¯çƒå½±ä¸š", "815": " ç¯çƒå½±ä¸š", "816": " ç¯çƒå½±ä¸š", "817": " ç¯çƒå½±ä¸š", "818": " ç¯çƒå½±ä¸š", "819": " æ´¾æ‹‰è’™å½±ä¸š", "820": " æ´¾æ‹‰è’™å½±ä¸š", "821": " é»„å­éŸ¬å·¥ä½œå®¤", "822": " é«˜å“å›¾åƒ", "823": " é«˜å“å›¾åƒ", "824": " é«˜å“å›¾åƒ", "825": " é«˜å“å›¾åƒ", "826": " é«˜å“å›¾åƒ", "827": " çˆ±å¥‡è‰ºå½±ä¸š", "828": " çˆ±å¥‡è‰ºå½±ä¸š", "829": " ä¼˜é…·", "830": " åŸºç¾å½±ä¸š", "831": " åŸºç¾å½±ä¸š", "832": " é­”å¨æ˜ ç”»", "833": " äºšæ´²æ˜Ÿå…‰å¨±ä¹", "834": " å‘¨å†¬é›¨å·¥ä½œå®¤", "835": "å®ˆæœ›å…ˆé”‹0", "836": "å®ˆæœ›å…ˆé”‹1", "837": "å®ˆæœ›å…ˆé”‹2", "838": "å®ˆæœ›å…ˆé”‹3", "839": "å®ˆæœ›å…ˆé”‹4", "840": "å®ˆæœ›å…ˆé”‹5", "841": "å®ˆæœ›å…ˆé”‹6", "842": "å®ˆæœ›å…ˆé”‹7", "843": "å®ˆæœ›å…ˆé”‹8", "844": "å®ˆæœ›å…ˆé”‹9", "845": "å®ˆæœ›å…ˆé”‹10", "846": "å®ˆæœ›å…ˆé”‹11", "859": " è®°å¿†å¤§å¸ˆ", "860": "å†’é™©å²›20", "861": "å†’é™©å²›21", "862": "å†’é™©å²›22", "863": "å†’é™©å²›23", "864": "å†’é™©å²›24", "865": "å†’é™©å²›25", "866": "å†’é™©å²›26", "867": "å†’é™©å²›27", "868": "å†’é™©å²›28", "869": "å†’é™©å²›29", "870": "å†’é™©å²›210", "871": "å†’é™©å²›211", "872": " å¤©é¾™å…«éƒ¨", "873": " å¤©é¾™å…«éƒ¨", "874": " å˜å½¢é‡‘åˆšol", "875": " å˜å½¢é‡‘åˆšol", "876": " ä¸€å“èŠéº»ç‹", "877": " ä¸€å“èŠéº»ç‹", "878": " ä¸€å“èŠéº»ç‹", "879": " ä¸€å“èŠéº»ç‹", "880": " ä¸€å“èŠéº»ç‹", "881": " ä¸€å“èŠéº»ç‹", "882": " ç™½æ•¬äº­", "883": " å‰‘çµ", "886": " æœ€å¼ºnba", "887": " æœ€å¼ºnba", "2371": "æŸ³å²©1", "2481": "èµµä¸½é¢–1" }
        const LOCAL_STORAGE_PREFIX = '$CSDNCleaner_'
        const Toolkit = {
            delay(timeout) {
                return new Promise(resolve => setTimeout(resolve, timeout))
            },
            // é€šè¿‡ LocalStorage / GM_getValue èµ‹å€¼
            setValue(key, value) {
                localStorage.setItem(LOCAL_STORAGE_PREFIX + key, value)
                GM_setValue(LOCAL_STORAGE_PREFIX + key, value)
            },
            getValue(key, defaultValue = null) {
                return localStorage.getItem(LOCAL_STORAGE_PREFIX + key) || GM_getValue(LOCAL_STORAGE_PREFIX + key, defaultValue)
            },
            showDom(selector, isShow) {
                const domList = document.querySelectorAll(selector)
                if (!domList || !domList.length) return
                const method = isShow ? 'remove' : 'add'
                for (const d of domList) {
                    d.classList[method]('d-none')
                }
            }
        }
        const BackgroundImageRange = {
            idOrUrl: null, // å½“å‰ image ID / è‡ªå®šä¹‰ url, ç”¨äºæ ‡è®°å½“å‰æ˜¾ç¤ºçš„å›¾ç‰‡
            get currentUrl() {
                const result = { url: null, name: null, category: null }
                if (!this.idOrUrl) return result
                if (typeof this.idOrUrl === 'string') {
                    result.url = this.idOrUrl
                    result.name = 'è‡ªå®šä¹‰å›¾ç‰‡'
                } else {
                    result.url = this.toBaiduUrl({ id: this.idOrUrl, cssWrap: false })
                    for (const categoryName in IMG_CATEGORYS) {
                        if (IMG_CATEGORYS[categoryName].includes(this.idOrUrl)) {
                            result.category = categoryName
                        }
                    }
                    result.category
                    result.name = IMG_MAP[this.idOrUrl.toString()]
                }
                return result
            },
            STATE_SELECTED_CATEGORY: 'STATE_SELECTED_CATEGORY',
            range: {
                categorys: [],          // ç±»ç›®é›†åˆ
                imgs: [],               // å›¾ç‰‡é›†åˆ
                customUrl: '',          // è‡ªå®šä¹‰é“¾æ¥
                bgColor: '',            // çº¯è‰²èƒŒæ™¯
                defaultHideMenu: false, // é»˜è®¤æ˜¯å¦éšè—è®¾ç½®æŒ‰é’®
                showSourceLink: true,   // æ˜¯å¦åŒ¹é…åŸæ–‡é“¾æ¥
            },
            init() {
                const range = Toolkit.getValue('background_ranges')
                if (range) {
                    try {
                        const _range = JSON.parse(range)
                        if (!_range || typeof _range !== 'object') throw new Error('range data error')
                        Object.assign(this.range, _range)
                    } catch (err) {
                        console.error(err)
                    }
                }
            },
            toCategoryHTML() {
                let html = ''
                for (const categoryName in IMG_CATEGORYS) {
                    html += `<div class="category ${this.range.categorys.includes(categoryName) ? this.STATE_SELECTED_CATEGORY : ''}" data-key="${categoryName}">${categoryName}</div>\n`
                }
                return html
            },
            save() {
                console.warn(`%c[${window.$CSDNCleaner.NAME}] ä¿å­˜é…ç½®: `, 'color: teal', this)
                for (const optName in window.$CSDNCleaner.BackgroundImageRange.range) {
                    const syncMethodName = 'sync' + optName[0].toUpperCase() + optName.substr(1)
                    if (typeof window.$CSDNCleaner.BackgroundImageRange[syncMethodName] === 'function') window.$CSDNCleaner.BackgroundImageRange[syncMethodName]()
                }
                Toolkit.setValue('background_ranges', JSON.stringify(window.$CSDNCleaner.BackgroundImageRange.range))
            },
            getImgUrl() {
                const customUrl = this.range.customUrl
                let url = null
                let id = null
                if (customUrl) {
                    url = `url(${customUrl})`
                    this.idOrUrl = customUrl
                } else if (this.range.categorys && this.range.categorys.length) {
                    const idList = this._getAllImgIdsByCategorys()
                    const index = this.getRandomInterger(idList.length)
                    id = idList[index.toString()]
                    url = this.toBaiduUrl({ id })
                    this.idOrUrl = id || this.toBaiduUrl({ id, cssWrap: false })
                } else {
                    const allImgs = Object.keys(IMG_MAP).map(img => Number(img))
                    const index = this.getRandomInterger(allImgs.length)
                    id = allImgs[index.toString()]
                    url = this.toBaiduUrl({ id })
                    this.idOrUrl = id || this.toBaiduUrl({ id, cssWrap: false })
                }
                return url
            },
            toBaiduUrl({ id, cssWrap = true }) {
                const url = `https://ss2.bdstatic.com/lfoZeXSm1A5BphGlnYG/skin/${id}.jpg`
                return cssWrap ? `url(${url})` : url
            },
            _getAllImgIdsByCategorys() {
                const idList = []
                for (const categoryName in this.range.categorys) {
                    if (Array.isArray(IMG_CATEGORYS[this.range.categorys[categoryName]])) idList.push(...IMG_CATEGORYS[this.range.categorys[categoryName]])
                }
                return idList
            },
            getRandomInterger(size) {
                return Math.ceil(Math.random() * size) - 1
            },
            syncDefaultHideMenu() {
                const menu = document.querySelector('[data-type="$setting"]')
                if (!menu || !menu.classList) return
                const method = window.$CSDNCleaner.BackgroundImageRange.range.defaultHideMenu ? 'add' : 'remove'
                menu.classList[method]('defaultHideMenu')
            },
            getSourceLinkDisplay() {
                return this.range.showSourceLink ? 'inline-block' : 'none'
            },
            setBgColor(color) {
                this.range.bgColor = color || ''
                this.save()
                document.body.style.setProperty('--background-color', color || '#EAEAEA')
                this.updateBgImage(null, !!color)
            },
            updateBgImage(url, disabled) {
                let imgUrl = url || window.$CSDNCleaner.BackgroundImageRange.getImgUrl()
                if (imgUrl.indexOf('url(') === -1) imgUrl = `url(${imgUrl})`
                document.body.style.setProperty('--background-image', disabled ? 'none' : imgUrl)
            }
        }
        window.$CSDNCleaner = {
            NAME: 'CSDN å»å¹¿å‘Šæ²‰æµ¸é˜…è¯»æ¨¡å¼',
            BackgroundImageRange,
            options: [],
            launch() {
                console.log(`%c[${window.$CSDNCleaner.NAME}] æ„Ÿè°¢æ”¯æŒ, æ¬¢è¿åé¦ˆ: https://greasyfork.org/zh-CN/scripts/373457/feedback`, 'color: teal')
                window.addEventListener('DOMContentLoaded', window.$CSDNCleaner.onLoad)
                return this
            },
            init() {
                BackgroundImageRange.init() // ä»æœ¬åœ°å­˜å‚¨ä¸­è·å–é…ç½®
                console.log(BackgroundImageRange.range)
                window.$CSDNCleaner
                    .initSettings() // åˆå§‹åŒ–æŒ‰é’®ç»„
                    .appendSheets() // æ·»åŠ æ ·å¼
                    // .cleanCopy() // è§£ç¦å¤åˆ¶åŠŸèƒ½
                    .launch() // DOM åˆå§‹åŒ–
            },
            // ç”Ÿæˆ sheets
            _getSheets() {
                // è‹¥è®¾ç½®äº†èƒŒæ™¯è‰², åˆ™ä½¿ç”¨çº¯è‰², å¦åˆ™ä½¿ç”¨è‡ªå®šä¹‰å›¾ç‰‡æˆ–éšæœºå›¾ç‰‡èƒŒæ™¯
                const bgColor = window.$CSDNCleaner.BackgroundImageRange.range.bgColor
                const imgUrl = window.$CSDNCleaner.BackgroundImageRange.getImgUrl()
                // const backgroundSheets = bgColor
                //     ? `background-color: var(--background-color) !important; background-image: none;`
                //     : `background-image: ${window.$CSDNCleaner.BackgroundImageRange.getImgUrl()};`
                const sheets = `
                    body {
                        --comments-avatar-size: 50px;
                        --source-link-wrapper-display: ${window.$CSDNCleaner.BackgroundImageRange.getSourceLinkDisplay()};
                        --background-color: ${bgColor || '#EAEAEA'};
                        --background-image: ${bgColor ? 'none' : imgUrl};
                    }
                    body:not(.clean-mode) { background-color: var(--background-color) !important; background-image: var(--background-image); background-attachment: fixed !important;background-size; cover; background-repeat: no-repeat; background-size: 100% !important; }
                    body>#page>#content, body>.container.container-box,main,body>.main.clearfix { opacity: 0.9; }
                    main {margin: 20px;}
                    #local { position: fixed; left: -99999px }
                    .recommend-item-box .content,.post_feed_box,.topic_r,.mod_topic_wrap,#bbs_title_bar,#bbs_detail_wrap,#left-box,main {width: 100% !important;}
                    .column-advert-box, .comment-sofa-flag, #article_content .more-toolbox, .blog-content-box a[data-report-query],main .template-box, .blog-content-box>.postTime,.post_body div[data-pid],#unlogin-tip-box,.t0.clearfix,.recommend-item-box.recommend-recommend-box,.hljs-button.signin,.csdn-side-toolbar>a[data-type]:not([data-type=gotop]):not([data-type="$setting"]),a[href^="https://edu.csdn.net/topic"],.adsbygoogle,.mediav_ad,.bbs_feed_ad_box,.bbs_title_h,.title_bar_fixed,#adContent,.crumbs,#page>#content>#nav,#local,#reportContent,.comment-list-container>.opt-box.text-center,.type_hot_word,.blog-expert-recommend-box,.login-mark,#passportbox,.hljs-button.signin,.recommend-download-box,.recommend-ad-box,#dmp_ad_58,.blog_star_enter,#header,.blog-sidebar,#new_post.login,.mod_fun_wrap,.hide_topic_box,.bbs_bread_wrap,.news-nav,#rightList.right-box,aside,#kp_box_476,.tool-box,.recommend-right,.pulllog-box,.adblock,.fourth_column,.hide-article-box,#csdn-toolbar
                        {display: none !important;}
                    .hide-main-content,#blog_content,#bbs_detail_wrap,.article_content {height: auto !important;}
                    .comment-list-box,#bbs_detail_wrap {max-height: none !important;}
                    #main {width: 100% !important;}
                    #page {width: 80vw !important;}
                    #bbs_title_bar {margin-top: 20px;}
                    #page>#content {margin-top: 0 !important;}
                    /* è¯„è®ºåŒºæ¯è¡Œå¢åŠ  hover æ•ˆæœ | 2020-05-17 18:32:22 */
                    .comment-box { background-color: rgba(255,255,255,0.9) !important; }
                    .comment-list-box { padding: 0 !important; }
                    .comment-list-box > .comment-list { padding: 0 24px; margin-top: 0 !important; padding-top: 16px }
                    .comment-list-box > .comment-list:hover { background-color: rgba(255,255,255,0.7); }
                    /* å±è”½å›ºå®šåœ¨é¡µé¢åº•éƒ¨çš„ toolbox | 2020-05-17 18:28:03 */
                    .more-toolbox > .left-toolbox { position: relative !important; left: 0 !important; }
                    /* åº•éƒ¨ä½œè€…ä¿¡æ¯å³ä¾§æŒ‰é’®åªæ˜¾ç¤ºå…³æ³¨ | 2020-05-17 18:26:52 */
                    .right-message > a:not(.personal-watch) { display: none; }
                    /* è¯„è®ºåŒºè¾“å…¥æ¡†äº¤å‰è½´å¯¹é½ | 2020-05-17 18:25:54 */
                    .comment-edit-box { display: flex; align-items: center; }
                    /* åŸæ–‡é“¾æ¥æ ·å¼ | 2020-05-17 17:41:11 */
                    .source-link-wrapper { display: var(--source-link-wrapper-display); vertical-align: top; }
                    .source-link-wrapper > .source-link-icon { margin-right: 5px; }
                    .source-link-wrapper > .source-link-label { }
                    .source-link-wrapper > .source-link-link {
                        display: inline-block;
                        overflow: hidden;
                        text-overflow:ellipsis;
                        white-space: nowrap;
                        width: 20vw;
                        max-width: 30vw;
                        min-width: 15vw;
                    }
                    .source-link-wrapper > .source-link-link:hover { color: #008eff !important; }
                    /* é˜²æ­¢ç½‘é¡µä¸»ä½“å†…å®¹è¢«é»‘ç™½å¤„ç†, é€‚ç”¨äºç‰¹æ®Šæ—¥æœŸ; CSDN çœŸæ˜¯å¤ªè ¢äº†ï¼Œåªæœ‰ CSDN æŠŠæ–‡ç« å†…å®¹ä¸­çš„å›¾ç‰‡éƒ½æ˜¾ç¤ºæˆé»‘ç™½çš„äº†, ä¸¥é‡å½±å“é˜…è¯»! | 2020-04-04 13:17:48 */
                    html { filter: grayscale(0) !important; }
                    /* è¯„è®ºåŒºè¯„è®ºå†…å®¹å¼ºåˆ¶æ¢è¡Œä»¥ä¿æŒä¸€è‡´æ€§ | 2020-02-19 08:58:33 */
                    .comment-box .comment-list-container .comment-list .new-comment { display: block !important; }
                    /* è¦†ç›–æ‰€æœ‰ media query æ ·å¼ä»¥é˜²æ­¢åŸæœ‰çš„è‡ªé€‚åº”æ ·å¼å¯¼è‡´å¸ƒå±€é”™ä¹± | 2020-02-19 08:28:52 */
                    @media screen and (max-width: 1379px) and (min-width: 1320px) {
                        .main_father > .container#mainBox > main { width: 100% !important; float: none; margin: 0 !important; margin-top: 20px !important; }
                    }
                    @media screen and (max-width: 1699px) and (min-width: 1550px) {
                        .main_father > .container#mainBox > main { width: 100% !important; float: none; margin: 0 !important; margin-top: 20px !important; }
                    }
                    @media screen and (max-width: 1549px) and (min-width: 1380px) {
                        .main_father > .container#mainBox > main { width: 100% !important; float: none; margin: 0 !important; margin-top: 20px !important; }
                    }
                    @media screen and (min-width: 1700px) {
                        .main_father > .container#mainBox > main { width: 100% !important; float: none; margin: 0 !important; margin-top: 20px !important; }
                    }
                    /* è¯„è®ºåŒºæ ·å¼é‡å†™ | 2019-12-27 21:32:24 */
                    .comment-list-container img.avatar {
                        width: var(--comments-avatar-size) !important;
                        height: var(--comments-avatar-size) !important;
                        margin-top: 4px;
                        margin-right: 15px !important;
                    }
                    .comment-edit-box img.show_loginbox {
                        width: var(--comments-avatar-size) !important;
                        height: var(--comments-avatar-size) !important;
                    }
                    /* é˜²æ­¢åŸæœ‰çš„è‡ªé€‚åº”æ ·å¼å¯¼è‡´å¸ƒå±€é”™ä¹± | 2019-12-27 21:08:09 */
                    @media screen and (min-width: 1700px) {
                        .recommend-right.align-items-stretch { color: teal; display: none !important; }
                    }
                    /* éšè—åº•éƒ¨ more-toolbox æŒ‰é’®ç»„ ~~å’Œåº•éƒ¨ä½œè€… row ä¸­çš„å…¶ä»–ä¿¡æ¯~~; è¿˜æ˜¯ä¿ç•™è¿™ä¸€è¡Œå§ ... ä»¥åå¯èƒ½ä¼šæŠŠæ›´å¤šå¯¹æ–‡ç« å’Œä½œè€…çš„æ“ä½œæ”¾åˆ°è¿™é‡Œé¢ | 2019-12-17 22:18:16 */
                    /* ä¿®æ”¹åº•éƒ¨ ç§ä¿¡æ±‚å¸®åŠ© æŒ‰é’®æ ·å¼ | 2019-11-23 17:37:52 */
                    .reward-user-box .reward-fexd { width: 100px !important; }
                    .reward-user-box .reward-word { display: none !important; }
                    .reward-user-box .reward-fexd { border: none !important; background: transparent !important; color: #B4B4B4 !important; font-size: 14px !important; line-height: 21px !important; height: 30px !important }
                    .reward-user-box .reward-fexd > div { color: transparent; }
                    .reward-user-box:hover .reward-fexd > div { color: #B4B4B4; }
                    /* iteye æ ·å¼é‡æ„ | 2019-11-02 11:19:43 */
                    body>#page>#content, body>#page>#content>#main .blog_comment { width: auto; }
                    body>#page>#content>#main .blog_bottom { height: 30px; }
                    body>#page>#content>#main .blog_comment .comment_content { background-color: rgba(255, 214, 173, 0.2); }
                    body>#page>#content, body>#page>#content>#main { border: none; }
                    body>#page>#content>#main #bottoms, body>#page>#content>#main .blog_nav { display: none; }
                    body>#page>#content>#main .blog_title h3 { font-size: 24px; word-wrap: break-word; margin-bottom: 25px; }
                    body>#page>#content>#main, #bbs_title_bar > .owner_top,.blog-content-box { border-top-left-radius: 8px; border-top-right-radius: 8px; }
                    body > div#page {background-color: transparent}
                    .dl_no_more:after { content: "ä¸Šè¾¹æ˜¯åŸè¯, è„šæœ¬ä½œè€…åŸæœ¬æƒ³å±è”½è¿™æ®µè¯, ä½†æ˜¯ CSDN ä»æœªæ‰¾åˆ°è‡ªå·±çš„åº•çº¿;\\A ä»é˜…è¯»æ›´å¤šå¿…é¡»æ³¨å†Œ, åˆ°éªŒè¯æ‰‹æœºå·å¿…é¡»å…³æ³¨å…¬ä¼—å·, å†åˆ°å¤§å°ºåº¦Hå¹¿å‘Š, ä¸¥é‡å½±å“äº†ç”¨æˆ·ä½“éªŒ;\\A è‡ªä» CSDN ä½¿ç”¨æ˜æ–‡å¯†ç è¢«è„±åº“ä¹‹åæˆ‘å°±ä¸å†ä½¿ç”¨ CSDN è´¦å·, ä¸ºäº†ç»§ç»­é˜…è¯» CSDN å†…å®¹æˆ‘å†™äº†è¿™ä¸ªè„šæœ¬  "; color: teal; display: block; width: 60%; margin: auto; white-space: pre; }
                    .recommend-box>.recommend-item-box:hover { background-color: rgba(255,255,255,0.8); }
                    /* è„šæœ¬è®¾ç½®å¼¹çª— */
                    a.option-box[data-type="$setting"] img {
                        -webkit-transform: rotate(360deg);
                        animation: rotation 2.5s linear 1;
                        -moz-animation: rotation 2.5s linear 1;
                        -webkit-animation: rotation 2.5s linear 1;
                        -o-animation: rotation 2.5s linear 1;
                    }
                    a.option-box[data-type=gotop] + a.option-box[data-type="$setting"] {
                        display: flex;
                    }
                    a.go-top-hide.option-box[data-type=gotop] + a.defaultHideMenu.option-box[data-type="$setting"] {
                        display: none;
                    }
                    #setting-dialog {
                        display: block;
                        position: fixed;
                        top: 20vh;
                        width: 100%;
                        height: 100%;
                        display: flex;
                        justify-content: center;
                    }
                    #setting-dialog section header {
                        max-width: 550px;
                        height: 50px;
                        font-size: 20px;
                        background: none;
                        padding: 0 15px;
                        display: flex;
                        justify-content: space-between;
                        padding: 0 15px;
                        align-items: center;
                    }
                    #setting-dialog section header .icon-close > img {
                        width: 20px;
                        cursor: pointer;
                    }
                    #setting-dialog section article .row {
                        margin-bottom: 10px;
                    }
                    #setting-dialog section article .row .color-picker-box {
                        margin-bottom: 10px;
                    }
                    #setting-dialog section article .row > label {
                        font-weight: bold;
                    }
                    #setting-dialog section article button { color: #409EFF; background-color: #FAFAFA; padding: 4px; margin: 2.5px; border: 1px solid: #EEE; border-radius: 3px; }
                    #setting-dialog section article button:hover { background-color: #EEE; }
                    #setting-dialog section article button#btn-clear-bg { color: #F56C6C; }
                    #setting-dialog section article button#btn-clear-bgColor { color: #F56C6C; }
                    #setting-dialog section article button#btn-update-bg { color: #E6A23C; }
                    /* #setting-dialog section article button#btn-use-current { color: #909399; } */
                    /* é“¾æ¥è¾“å…¥æ¡† */
                    #custom-bg-url {
                        width: 100%;
                        margin-right: 10px;
                        height: 25px;
                        border-radius: 3px;
                        border: 2px solid #DDD;
                    }
                    #setting-dialog section article .row#defaultHideMenu-wrap > .content > label {
                        cursor: pointer;
                        margin-right: 15px;
                    }
                    #setting-dialog section article .row#defaultHideMenu-wrap > .content > label >input {
                        vertical-align: middle;
                    }
                    #setting-dialog section article .row > .content {
                        display: flex;
                        width: 500px;
                        flex-wrap: wrap;
                        align-items: center;
                    }
                    #setting-dialog section article .row > .content > div {
                        color: grey;
                        margin-right: 10px;
                        cursor: pointer;
                    }
                    #setting-dialog section article .row > .content > div:hover {
                        color: #000;
                    }
                    #setting-dialog section article .row > .content > div.STATE_SELECTED_CATEGORY {
                        color: #F60;
                        font-size: 20px;
                        letter-spacing: 1px;
                    }
                    #setting-dialog section article {
                        max-width: 550px;
                        padding: 20px;
                        height: calc(100% - 50px);
                        overflow: auto;
                    }
                    #setting-dialog section article::-webkit-scrollbar {/*æ»šåŠ¨æ¡æ•´ä½“æ ·å¼*/
                        width: 6px;     /*é«˜å®½åˆ†åˆ«å¯¹åº”æ¨ªç«–æ»šåŠ¨æ¡çš„å°ºå¯¸*/
                        height: 6px;
                    }
                    #setting-dialog section article::-webkit-scrollbar-thumb {/*æ»šåŠ¨æ¡é‡Œé¢å°æ–¹å—*/
                        border-radius: 10%;
                        -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.3);
                        background: rgba(0,0,0,0.3);
                    }
                    #setting-dialog section article::-webkit-scrollbar-track {/*æ»šåŠ¨æ¡é‡Œé¢è½¨é“*/
                        -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.3);
                        border-radius: 0;
                        background: rgba(0,0,0,0.1);
                    }
                    /* å¼¹çª—å†…éƒ¨æ ·å¼ */
                    #setting-dialog section {
                        min-width: 500px;
                        height: 75vh;
                        max-height: 520px;
                        min-height: 370px;
                        /* overflow: auto; */
                        background-color: #FFF;
                        /* border-radius: 5px; */
                        border: 2px solid #EEE;
                    }
                    /* è‡ªå®šä¹‰è¡¥å……æ ·å¼ */
                    .display-none {display: none !important;}
                    #setting-dialog .tips-line { color: grey; font-size: 12px }
                    #setting-dialog .link { color: blue; }
                    @-webkit-keyframes rotation{
                        from {-webkit-transform: rotate(0deg);}
                        to {-webkit-transform: rotate(360deg);}
                    }
                `
                return sheets
            },
            // é€šè¿‡æ³¨å…¥ css å®ç°éšè—å¹¿å‘Šå¹¶å›ºå®šå¸ƒå±€
            appendSheets() {
                const sheet = document.createTextNode(this._getSheets())
                const el = document.createElement('style')
                el.id = 'CSDM-cleaner-sheets'
                el.appendChild(sheet)
                document.getElementsByTagName('head')[0].appendChild(el)
                return this
            },
            // å¤åˆ¶åŠŸèƒ½
            cleanCopy() {
                csdn.copyright && csdn.copyright.init('', '', '')
                return this
            },
            onLoad() {
                // å›¾ç‰‡ä¸‹çš„åº•è‰²
                // document.body.setAttribute('style', 'background-color:#EAEAEA !important')
                // è§£é™¤è·³è½¬æ‹¦æˆª
                $ && $("#content_views") && $("#content_views").off('click')
                // åˆå§‹åŒ–å³ä¾§ bottom menu tool bar
                window.$CSDNCleaner._loadSettings()
                window.$CSDNCleaner.cleanCopy() // è§£ç¦å¤åˆ¶åŠŸèƒ½
                window.$CSDNCleaner._launchPagintion() // è§£ç¦å¹¶åˆå§‹åŒ–åˆ†é¡µç»„ä»¶
                window.$CSDNCleaner.showSourceLink() // è½¬è½½çš„æ–‡ç« æ˜¾ç¤ºåŸæ–‡é“¾æ¥
                window.$CSDNCleaner.loadColorPicker() // åŠ è½½ color picker
            },
            _launchPagintion() {
                // ç›‘å¬æ•°æ®å±‚å˜åŠ¨å¹¶åŠ¨æ€æ§åˆ¶åˆ†é¡µç»„ä»¶æ˜¾ç¤º
                if (!csdn.comments) return
                Object.defineProperty(csdn.comments, 'pageCount', {
                    get() { return this._$pageCount || 1 },
                    set(v) {
                        console.log('set pageCount: ', v)
                        this._$pageCount = v // å…ˆä¿å­˜é¡µæ•°
                        Toolkit.showDom('#commentPage', v > 1) // 1. æ§åˆ¶åˆ†é¡µç»„ä»¶æ˜¾ç¤º
                        window.$CSDNCleaner._initPagintion() // 2. é‡æ„è¯„è®ºåŒºæ ·å¼
                    }
                })
            },
            _initPagintion() {
                // to bo continue ...
            },
            // åˆå§‹åŒ– Options
            initSettings() {
                return this
            },
            async _loadSettings() {
                const settingOption = this._fetchSettingOption()
                for (let times = 20; times--;) {
                    await Toolkit.delay(300)
                    const wrapper = document.querySelector('.csdn-side-toolbar')
                    if (!wrapper) continue
                    wrapper.appendChild(settingOption)
                }
            },
            _fetchSettingOption() {
                const opt = this._getOption({ dataType: '$setting', img: 'https://images.gitbook.cn/FuMNvLb25yJ4RiEg_2OnS8jpI8aB', name: 'è„šæœ¬<br>è®¾ç½®' })
                if (window.$CSDNCleaner.BackgroundImageRange.range.defaultHideMenu) opt.classList.add('defaultHideMenu')
                opt.addEventListener('click', evt => {
                    this.toggleDialog()
                })
                this._fetchSettingDialog()._bindDialogEvents()
                return opt
            },
            _fetchSettingDialog() {
                const settingDialog = document.createElement('div')
                settingDialog.id = 'setting-dialog'
                settingDialog.classList.add('display-none')
                const categorys = BackgroundImageRange.toCategoryHTML()
                const { url, name, category } = window.$CSDNCleaner.BackgroundImageRange.currentUrl
                const currentBackgroundHTML = window.$CSDNCleaner.BackgroundImageRange.range.bgColor
                    ? `<span>${window.$CSDNCleaner.BackgroundImageRange.range.bgColor}</span>`
                    : `<a class="link" target="_blank" href="${url}">${category ? '<' + category + '> ' : ''}${name}</a>`
                settingDialog.innerHTML = `
                    <section>
                        <header>
                            <div>è®¾ç½® - [${this.NAME}]</div>
                            <div class="icon-close">
                                <img src="https://csdnimg.cn//cdn/content-toolbar/guide-close-btn.png">
                            </div>
                        </header>
                        <article>
                            <div class="row">
                                <label>å½“å‰èƒŒæ™¯å›¾: </label>
                                <div class="content">
                                    ${currentBackgroundHTML}
                                </div>
                            </div>
                            <div class="row">
                                <label>èƒŒæ™¯å›¾ç‰‡ç±»ç›®èŒƒå›´(ç‚¹é€‰): </label>
                                <div class="content">
                                    ${categorys}
                                </div>
                            </div>
                            <div class="row">
                                <label>è‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡é“¾æ¥(å›ºå®šä½¿ç”¨æ­¤é“¾æ¥): </label>
                                <div class="tips-line">æ‚¨å¯ä»¥é€‰æ‹©ä¸Šä¼ ç™¾åº¦é¦–é¡µè‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡, ç„¶åå°†é“¾æ¥å¡«å…¥</div>
                                <div class="content">
                                    <input id="custom-bg-url" value="${BackgroundImageRange.range.customUrl}"/>
                                    <button type="reset" id="btn-update-bg">åˆ·æ–°èƒŒæ™¯å›¾ç‰‡</button>
                                    <button type="reset" id="btn-clear-bg">æ¸…é™¤</button>
                                    <button type="button" id="btn-save-bg">ä¿å­˜</button>
                                    <button type="button" id="btn-use-current">ä½¿ç”¨å½“å‰å›¾ç‰‡</button>
                                </div>
                            </div>
                            <div class="row">
                                <label>çº¯è‰²èƒŒæ™¯(ä¼˜å…ˆä½¿ç”¨): </label>
                                <div class="color-picker-box">
                                    <div class="tips-line">
                                        <span>ä¼˜å…ˆçº§é«˜äºè‡ªå®šä¹‰å›¾ç‰‡, é€‰æ‹©çº¯è‰²èƒŒæ™¯å°†è¦†ç›–å·²æ·»åŠ çš„èƒŒæ™¯å›¾ç‰‡é“¾æ¥</span>
                                        <button type="reset" id="btn-clear-bgColor">æ¸…é™¤</button>
                                    </div>
                                    <div class="content">
                                        <div class="color-picker-container"
                                            acp-palette="PALETTE_MATERIAL_CHROME"
                                            acp-palette-editable
                                            acp-color="${BackgroundImageRange.range.bgColor}"></div>
                                    </div>
                                </div
                            </div>
                            <div class="row" id="showSourceLink-wrap">
                                <label>æ˜¯å¦æ˜¾ç¤ºåŸæ–‡é“¾æ¥: </label>
                                <div class="tips-line">åŸæ–‡é“¾æ¥ä»é¡¶éƒ¨æ–‡ç« ä¿¡æ¯æˆ–åŸæ–‡ä¸­æå–, è‹¥ä½œè€…ç›´æ¥æ–‡ä¸­å†™å…¥åŸæ–‡é“¾æ¥(æœªåœ¨æ–‡ç« ä¿¡æ¯ä¸­æ ‡æ³¨), æœ‰å¯èƒ½ä¼šåŒ¹é…é”™è¯¯</div>
                                <div class="content">
                                    <label style="margin-right: 15px;">
                                        <input type="radio" value="0" ${BackgroundImageRange.range.showSourceLink ? '' : 'checked'} class="radio-showSourceLink" name="showSourceLink" />
                                        <span>éšè—</span>
                                    </label>
                                    <label style="margin-right: 15px;">
                                        <input type="radio" value="1" ${BackgroundImageRange.range.showSourceLink ? 'checked' : ''} class="radio-showSourceLink" name="showSourceLink" />
                                        <span>æ˜¾ç¤º</span>
                                    </label>
                                </div>
                            </div>
                            <div class="row" id="defaultHideMenu-wrap">
                                <label>æ˜¯å¦éšè—è®¾ç½®(å°é½¿è½®)æŒ‰é’®: </label>
                                <div class="tips-line">éšè—ä¹‹åè®¾ç½®(å°é½¿è½®)æŒ‰é’®ä¼šä¸å›åˆ°é¡¶éƒ¨æŒ‰é’®åŒæ­¥æ˜¾ç¤ºå’Œéšè—</div>
                                <div class="content">
                                    <label style="margin-right: 15px;">
                                        <input type="radio" value="1" ${BackgroundImageRange.range.defaultHideMenu ? 'checked' : ''} class="radio-defaultHideMenu" name="defaultHideMenu" />
                                        <span>éšè—</span>
                                    </label>
                                    <label>
                                        <input type="radio" value="0" ${BackgroundImageRange.range.defaultHideMenu ? '' : 'checked'} class="radio-defaultHideMenu" name="defaultHideMenu" />
                                        <span>æ˜¾ç¤º</span>
                                    </label>
                                </div>
                            </div>
                            <div class="row">
                                <label>è”ç³»ä½œè€…: </label>
                                <div class="content">
                                    <div class="tips-line">æºç :</div>
                                    <div class="tips-line">
                                        <a class="link" href="https://github.com/SublimeCT/greasy_monkey_scripts" target="_blank">Github</a>
                                    </div>
                                </div>
                                <div class="content">
                                    <div class="tips-line">åé¦ˆ:</div>
                                    <div class="tips-line">
                                        <a class="link" href="https://greasyfork.org/zh-CN/scripts/373457-csdn-%E5%8E%BB%E5%B9%BF%E5%91%8A%E6%B2%89%E6%B5%B8%E9%98%85%E8%AF%BB%E6%A8%A1%E5%BC%8F/feedback" target="_blank">greasy fork page</a>
                                    </div>
                                </div>
                            </div>
                        </article>
                    </section>
                `
                document.body.appendChild(settingDialog)
                return this
            },
            _bindDialogEvents() {
                const dialogWrapper = document.getElementById('setting-dialog')
                const urlInput = document.getElementById('custom-bg-url')
                const saveUrlBtn = document.getElementById('btn-save-bg')
                const updateBgImageBtn = document.getElementById('btn-update-bg')
                const clearBgColorBtn = document.getElementById('btn-clear-bgColor')
                const saveCurrentImgBtn = document.getElementById('btn-use-current')
                const clearUrlBtn = document.getElementById('btn-clear-bg')
                const hideMenuWrap = document.getElementById('defaultHideMenu-wrap')
                const showSourceLinkWrap = document.getElementById('showSourceLink-wrap')
                if (!dialogWrapper) { console.error(`[${window.$CSDNCleaner.NAME}] Internal error. dialog init failed.`); return }
                dialogWrapper.addEventListener('click', evt => {
                    if (evt.target.id === 'setting-dialog' || evt.target.classList.contains('icon-close') || evt.target.parentNode.classList.contains('icon-close')) { // å…³é—­å¼¹çª—
                        window.$CSDNCleaner.toggleDialog()
                    } else if (evt.target.classList.contains('category')) { // é€‰æ‹©èƒŒæ™¯å›¾ç‰‡ç±»ç›®
                        const key = evt.target.attributes.getNamedItem('data-key').value
                        let existsIndex = -1
                        if (BackgroundImageRange.range.categorys.length > 0) {
                            for (let cIndex = BackgroundImageRange.range.categorys.length; cIndex--;) {
                                if (BackgroundImageRange.range.categorys[cIndex] === key) {
                                    existsIndex = cIndex
                                    break
                                }
                            }
                        }
                        if (existsIndex === -1) {
                            BackgroundImageRange.range.categorys.push(key)
                            evt.target.classList.add('STATE_SELECTED_CATEGORY')
                        } else {
                            BackgroundImageRange.range.categorys.splice(existsIndex, 1)
                            evt.target.classList.remove('STATE_SELECTED_CATEGORY')
                        }
                        BackgroundImageRange.save()
                    }
                })
                // urlInput.addEventListener('input', evt => {
                //     saveUrlBtn.setAttribute('disabled', urlInput.value != BackgroundImageRange.range.customUrl)
                // })
                saveUrlBtn.addEventListener('click', evt => {
                    if (urlInput.value && !/^http(s)?\:.+/.test(urlInput.value)) {
                        alert('è¯·è¾“å…¥æ­£ç¡®çš„å›¾ç‰‡é“¾æ¥')
                        return false
                    }
                    BackgroundImageRange.range.customUrl = urlInput.value
                    BackgroundImageRange.save()
                })
                saveCurrentImgBtn.addEventListener('click', evt => {
                    const { url } = window.$CSDNCleaner.BackgroundImageRange.currentUrl
                    console.warn(url, window.$CSDNCleaner.BackgroundImageRange)
                    if (!url) return false
                    urlInput.value = url
                    BackgroundImageRange.range.customUrl = url
                    BackgroundImageRange.save()
                    BackgroundImageRange.updateBgImage(url)
                })
                clearUrlBtn.addEventListener('click', evt => {
                    urlInput.value = BackgroundImageRange.range.customUrl = ''
                    BackgroundImageRange.save()
                })
                clearBgColorBtn.addEventListener('click', evt => {
                    BackgroundImageRange.setBgColor()
                })
                updateBgImageBtn.addEventListener('click', evt => {
                    BackgroundImageRange.updateBgImage(null, !!BackgroundImageRange.range.bgColor)
                })
                hideMenuWrap.addEventListener('change', evt => {
                    const dom = evt.target
                    if (!dom || !dom.classList || !dom.classList.contains('radio-defaultHideMenu')) return
                    const val = !!Number(dom.value)
                    urlInput.defaultHideMenu = BackgroundImageRange.range.defaultHideMenu = val
                    BackgroundImageRange.save()
                })
                showSourceLinkWrap.addEventListener('change', evt => {
                    const dom = evt.target
                    if (!dom || !dom.classList || !dom.classList.contains('radio-showSourceLink')) return
                    const val = !!Number(dom.value)
                    console.log('>>>', val, urlInput.showSourceLink, dom)
                    BackgroundImageRange.range.showSourceLink = val
                    document.body.style.setProperty('--source-link-wrapper-display', window.$CSDNCleaner.BackgroundImageRange.getSourceLinkDisplay())
                    BackgroundImageRange.save()
                })
            },
            toggleDialog() {
                const dialog = document.getElementById('setting-dialog')
                if (!dialog) throw new Error('dialog not found')
                dialog.classList.toggle('display-none')
            },
            _getOption({ dataType, img, name }) {
                const option = document.createElement('a')
                option.classList.add('option-box')
                option.setAttribute('data-type', dataType)
                const imgNode = document.createElement('img')
                imgNode.src = img
                const optionName = document.createElement('span')
                optionName.classList.add('show-txt')
                optionName.innerHTML = name
                option.appendChild(optionName)
                option.appendChild(imgNode)
                return option
            },
            _sourceLinkKeywords: ['è½¬è½½è‡ª', 'è½¬è‡ª', 'åŸæ–‡åœ°å€', 'åŸæ–‡é“¾æ¥', 'è½¬è½½åœ°å€', 'è½¬è½½é“¾æ¥', 'åŸæ–‡:', 'åŸæ–‡ï¼š'],
            _getSourceLink (row) {
                for (const keyword of this._sourceLinkKeywords) {
                    if (row.indexOf(keyword) === -1) continue
                    // 1. å°è¯•ä» <a> æ ‡ç­¾ä¸­è·å–é“¾æ¥
                    const attrMatchRes = row.match(/href="(.*?)"/)
                    const attr = attrMatchRes && attrMatchRes[1]
                    if (attr) return attr
                    // 2. å°è¯•è·å–æ•´æ®µé“¾æ¥å†…å®¹
                    const partMatchRes = row.replace(/<\/?[\w|\d]+>/g, '').match(/(https?:\/\/.*)\s?.*$/)
                    const part = partMatchRes && partMatchRes[1]
                    if (part) return part
                }
            },
            showSourceLink() {
                const sourceDom = document.querySelector('.article-source-link')
                let sourceLink = ''
                if (sourceDom) { // ä»é¡¶éƒ¨æŠ˜å é¢æ¿ä¸­è·å–
                    let hasSourceLink = false
                    for (const keyword of this._sourceLinkKeywords) {
                        if (sourceDom.innerHTML.indexOf(keyword) !== -1) {
                            hasSourceLink = true
                            break
                        }
                    }
                    if (hasSourceLink) {
                        const linkDom = sourceDom.querySelector('a')
                        if (linkDom) sourceLink = linkDom && linkDom.innerText
                    }
                } else {
                    // ä»æ–‡ä¸­åŒ¹é…, ä»æ–‡æœ«å– _sourceLinkCheckLineSize è¡Œ, è‹¥åŒ…å« _sourceLinkKeywords ä¸­çš„å†…å®¹åˆ™ä½¿ç”¨æ­£åˆ™åŒ¹é…è¯¥è¡Œä¸­åŒ…å«çš„é“¾æ¥
                    if (!document.getElementById('article_content')) return false
                    const articleRaw = document.getElementById('article_content').innerHTML
                    const articleLastLines = articleRaw.split('\n')
                    // å€’åºéå†, ä¼˜å…ˆå–æ–‡æœ«çš„åŸæ–‡é“¾æ¥
                    for (const row of articleLastLines) {
                        const link = this._getSourceLink(row)
                        if (link) {
                            sourceLink = link
                            break
                        }
                    }
                }
                if (!sourceLink) return
                this.appendSourceLinkDom(sourceLink)
                console.log(`%c[${window.$CSDNCleaner.NAME}] å½“å‰æ–‡ç« å¯èƒ½æ˜¯è½¬è½½çš„, åŒ¹é…åˆ°åŸæ–‡é“¾æ¥: ${sourceLink}`, 'color: teal')
            },
            appendSourceLinkDom(link) {
                const sourceLinkLabelWrapperDom = document.createElement('div')
                const sourceLinkIconDom = document.createElement('img')
                const sourceLinkLabelDom = document.createElement('span')
                const sourceLinkLinkDom = document.createElement('a')
                sourceLinkLabelWrapperDom.classList.add('source-link-wrapper')
                sourceLinkIconDom.classList.add('article-heard-img')
                sourceLinkIconDom.classList.add('source-link-icon')
                sourceLinkIconDom.setAttribute('src', 'https://csdnimg.cn/release/phoenix/template/new_img/shareWhite.png')
                sourceLinkLabelDom.classList.add('source-link-label')
                sourceLinkLabelDom.innerText = 'è½¬è½½è‡ª:'
                sourceLinkLinkDom.classList.add('follow-nickName')
                sourceLinkLinkDom.classList.add('source-link-link')
                sourceLinkLinkDom.innerText = link
                sourceLinkLinkDom.setAttribute('href', link)
                sourceLinkLinkDom.setAttribute('title', link)
                sourceLinkLinkDom.setAttribute('target', '_blank')

                sourceLinkLabelWrapperDom.appendChild(sourceLinkIconDom)
                sourceLinkLabelWrapperDom.appendChild(sourceLinkLabelDom)
                sourceLinkLabelWrapperDom.appendChild(sourceLinkLinkDom)
                // æ’å…¥é¡µé¢ä¸­
                const wrapper = document.querySelector('.bar-content')
                console.log(wrapper)
                if (wrapper) wrapper.appendChild(sourceLinkLabelWrapperDom)
            },
            loadColorPicker() {
                if (!window.AColorPicker) return
                window.AColorPicker.from('div.color-picker-container')
                    .on('change', (picker, color) => {
                        BackgroundImageRange.setBgColor(color)
                    })
            }
        }
        window.$CSDNCleaner.init()
    })()
})();